<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"
    />
  </head>
  <style>
    .material-symbols-outlined {
      font-size: 2rem;
    }
  </style>
  <body>
    <section class="vh-100">
      <div class="container py-6 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col col-xl-12">
            <div class="card">
              <div class="row g-0 d-flex justify-content-center">
                <div class="col-md-10 col-lg-7 d-flex align-items-center">
                  <div class="card-body p-5 p-lg-6 text-black">
                    <form>
                      <div
                        class="d-flex align-items-center justify-content-center mb-3 pb-1"
                      >
                        <h3 class="display-4">Sign Up</h3>
                      </div>
                      <div class="form-outline mb-4 d-flex row">
                        <div class="col-sm-12">
                          <label class="form-label" for="userName">이름</label>
                          <input
                            type="text"
                            id="userName"
                            name="userName"
                            class="form-control form-control-md"
                          />
                        </div>
                      </div>
                      <div class="form-outline mb-4 d-flex row align-items-end">
                        <div class="col-sm-10">
                          <label class="form-label" for="userId">아이디</label>
                          <input
                            type="text"
                            id="userId"
                            name="userId"
                            class="form-control form-control-md"
                            valid="false"
                            duplicate="false"
                          />
                        </div>
                        <div class="col-sm-2">
                          <button
                            type="button"
                            class="btn btn-md btn-secondary"
                          >
                            중복
                          </button>
                        </div>
                      </div>
                      <div
                        class="form-outline mb-4 d-flex row align-items-end justify-content-center"
                      >
                        <div class="col-sm-10">
                          <label
                            class="form-label"
                            for="userPassword"
                            valid="false"
                            >비밀번호</label
                          >
                          <input
                            type="password"
                            id="userPassword"
                            name="userPassword"
                            class="form-control form-control-md"
                          />
                        </div>
                        <div class="col-sm-2">
                          <span
                            class="material-symbols-outlined text-danger font-weight-bold"
                            >error</span
                          >
                        </div>
                      </div>
                      <div class="pt-1 mb-4">
                        <button
                          class="btn btn-primary btn-md btn-block"
                          type="button"
                          onclick="checkForm()"
                        >
                          회원가입
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        $(document).ready(function () {
          $("input[name='userId").change(function () {
            // 아이디에 한글 + 특수문자 + 공백 포함 + 글자 수 5~20자리 사이인지 여부
            regex_special_char = /[~!@#$%^&*()_+|<>?:{}]/gi;
            regex_kor_char = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/gi;
            const id = $(this).val();
            if (
              regex_special_char.test(id) ||
              regex_kor_char.test(id) ||
              id.length < 5 ||
              id.length > 20
            ) {
              alert("아이디는 영어와 숫자를 포함해야만 함");
              $(this).attr("valid", "false");
              return;
            }
            $(this).attr("valid", "true");
          });

          $("input[name='userPassword").change(function () {
            // 비밀번호 8~20자리, 영어 소문자/대문자/숫자/특수문자 1개 이상씩 포함
            regex_password =
              /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,20}$/;
            const password = $(this).val();
            if (regex_password.test(password) != true) {
              alert(
                "비밀번호는 8~20자리 사이, 영어 소문자/대문자/숫자/특수문자를 1개 이상씩 포함해야 합니다."
              );
            }
          });

          $("input[name='userName").change(function () {
            regex_name_pattern = /[a-z]|[A-Z]|[0-9]|[~!@#$%^&*()_+|<>?:{}]/gi;
            const name = $(this).val();
            if (regex_name_pattern.test(name)) {
              alert("이름을 입력해주세요.");
            }
          });
        });

        function checkForm() {
          const id = $("input[name='userId");
          const password = $("input[name='userPassword'");
          const name = $("input[name='userName");

          if ($(id).attr("valid") == "false") {
            console.log("아이디를 다시 한번 확인해주세요");
            return;
          }
          if ($(password).attr("valid") == "false") {
            console.log("비밀번호를 다시 한번 확인해주세요");
            return;
          }
        }
      </script>
    </section>
  </body>
</html>
